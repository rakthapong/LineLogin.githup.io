<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8">
  <title>Login with LINE</title>
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
</head>
<body>
<h3>กำลังเข้าสู่ระบบด้วย LINE...</h3>

<script>
const LIFF_ID = "2008686694-bLB6mwvm";
const GAS_API_URL = "https://script.google.com/macros/s/AKfycbxSBfKdwzqAeZlwkpn43r3-F1x3qZeuF19I4Q6Csbmh0VDfbJ7tR9xa11Jxz7LBzrhj/exec";

(async () => {
  await liff.init({ liffId: LIFF_ID });

  if (!liff.isLoggedIn()) {
    liff.login();
    return;
  }

  const profile = await liff.getProfile();

  const img = new Image();
  img.src =
    GAS_API_URL +
    "?lineUserId=" + profile.userId +
    "&displayName=" + encodeURIComponent(profile.displayName);

  alert("ผูก LINE สำเร็จแล้ว กลับเข้าแอปใหม่อีกครั้ง");
})();
</script>


  
</body>
</html>
