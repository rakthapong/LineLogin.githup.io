<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>LINE Login</title>
</head>

<body>
<script>
  // ===== CONFIG =====
  const channelId = "2008686694";

  // URL ‡∏Ç‡∏≠‡∏á Google Apps Script (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°)
  const gasUrl =
    "https://script.google.com/macros/s/AKfycbyzQH4s94DVNvq6x1OuiRdFxDq8UoMicDs0frYv_CYTpUkozOLZuqpNWdGHW6hI4d_vMQ/exec";

  // Deep link ‡πÄ‡∏Ç‡πâ‡∏≤ AppSheet ‡∏ù‡∏±‡πà‡∏á user
  const appsheetUserUrl =
    "https://www.appsheet.com/start/1e844dd1-1d99-431f-909c-eb52684f5ccf#view=room_user";
  // ==================

  const urlParams = new URLSearchParams(window.location.search);

  // ===== ‡∏Å‡∏£‡∏ì‡∏µ login LINE ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à =====
  if (urlParams.get("success") === "1") {

    alert(
      "‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏î‡πâ‡∏ß‡∏¢ LINE ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à üéâ\n" +
      "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏≤‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡πÅ‡∏≠‡∏û..."
    );

    // ‡πÄ‡∏î‡πâ‡∏á‡πÄ‡∏Ç‡πâ‡∏≤ AppSheet (‡πÄ‡∏ß‡πá‡∏ö‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏≠‡∏û‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠)
    location.href = appsheetUserUrl;

  } else {
    // ===== ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà login ‚Üí ‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ LINE Login =====
    const authUrl =
      "https://access.line.me/oauth2/v2.1/authorize" +
      "?response_type=code" +
      "&client_id=" + channelId +
      "&redirect_uri=" + encodeURIComponent(gasUrl) +
      "&state=login" +
      "&scope=profile";

    location.href = authUrl;
  }
</script>
</body>
</html>
