<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>แจ้งชำระเงิน</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- LIFF SDK -->
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
</head>

<body style="
  font-family:sans-serif;
  text-align:center;
  padding-top:100px;
">

<h2>กำลังเปิดหน้าแจ้งชำระเงิน...</h2>
<p>กรุณารอสักครู่</p>

<script>
/******** CONFIG ********/
const LIFF_ID = "2008686694-bLB6mwvm";
const GAS_URL =
  "https://script.google.com/macros/s/AKfycbzRkH5b29biTjtmSjX-cRnOpvuiOUi3EuAA4UaMExzTYKcNsLDhfhhT3rSIlzZcO9PMCQ/exec";
/************************/

async function start() {
  await liff.init({ liffId: LIFF_ID });

  if (!liff.isLoggedIn()) {
    liff.login();
    return;
  }

  const profile = await liff.getProfile();
  const lineUserId = profile.userId;

  // ส่ง lineUserId ไปตรวจสอบที่ GAS
  window.location.href =
    GAS_URL + "?lineUserId=" + encodeURIComponent(lineUserId);
}

start();
</script>

</body>
</html>
